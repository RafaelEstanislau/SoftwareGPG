{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rafal\\\\OneDrive\\\\Documentos\\\\Projeto-Software\\\\PS-ES-2021-2-GPG\\\\4.Sistema\\\\software-gpg\\\\src\\\\components\\\\Tasks.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { getDocs, collection, deleteDoc, doc, query, where } from \"firebase/firestore\";\nimport { Card, Button } from \"react-bootstrap\";\nimport { auth, db } from \"../firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Home() {\n  _s();\n\n  const [taskLists, setTaskLists] = useState([]);\n  const taskCollectionRef = collection(db, \"tasks\");\n  useEffect(() => {\n    const getTasks = async () => {\n      const data = query(taskCollectionRef, where(\"workers\", \"array-contains\", localStorage.getItem(\"id\")));\n      setTaskLists(data.docs.map(doc => ({ ...doc.data(),\n        id: doc.id\n      })));\n    };\n\n    getTasks();\n  }, []);\n\n  const deleteTask = async id => {\n    const taskDoc = doc(db, \"tasks\", id);\n    await deleteDoc(taskDoc);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: taskLists.map(task => {\n      return /*#__PURE__*/_jsxDEV(Card, {\n        children: /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: task.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 29,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n            children: task.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => {\n              deleteTask(task.id);\n            },\n            className: \"btn btn-danger\",\n            children: \"Excluir\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"SVY0i/p2WrxrpIBnPl9Y8zdJX3k=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/rafal/OneDrive/Documentos/Projeto-Software/PS-ES-2021-2-GPG/4.Sistema/software-gpg/src/components/Tasks.js"],"names":["React","useEffect","useState","getDocs","collection","deleteDoc","doc","query","where","Card","Button","auth","db","Home","taskLists","setTaskLists","taskCollectionRef","getTasks","data","localStorage","getItem","docs","map","id","deleteTask","taskDoc","task","title","text"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,EAAkBC,UAAlB,EAA8BC,SAA9B,EAAyCC,GAAzC,EAA8CC,KAA9C,EAAqDC,KAArD,QAAkE,oBAAlE;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,iBAA7B;AACA,SAASC,IAAT,EAAeC,EAAf,QAAyB,aAAzB;;;AAEA,SAASC,IAAT,GAAgB;AAAA;;AACd,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAMc,iBAAiB,GAAGZ,UAAU,CAACQ,EAAD,EAAK,OAAL,CAApC;AAEAX,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMgB,QAAQ,GAAG,YAAY;AAC3B,YAAMC,IAAI,GAAGX,KAAK,CAACS,iBAAD,EAAoBR,KAAK,CAAE,SAAF,EAAc,gBAAd,EAAgCW,YAAY,CAACC,OAAb,CAAqB,IAArB,CAAhC,CAAzB,CAAlB;AACAL,MAAAA,YAAY,CAACG,IAAI,CAACG,IAAL,CAAUC,GAAV,CAAehB,GAAD,KAAU,EAAE,GAAGA,GAAG,CAACY,IAAJ,EAAL;AAAiBK,QAAAA,EAAE,EAAEjB,GAAG,CAACiB;AAAzB,OAAV,CAAd,CAAD,CAAZ;AACD,KAHD;;AAIAN,IAAAA,QAAQ;AACT,GANQ,EAMN,EANM,CAAT;;AAQA,QAAMO,UAAU,GAAG,MAAOD,EAAP,IAAc;AAC/B,UAAME,OAAO,GAAGnB,GAAG,CAACM,EAAD,EAAK,OAAL,EAAcW,EAAd,CAAnB;AACA,UAAMlB,SAAS,CAACoB,OAAD,CAAf;AACD,GAHD;;AAIA,sBACE;AAAA,cACGX,SAAS,CAACQ,GAAV,CAAeI,IAAD,IAAU;AACvB,0BACE,QAAC,IAAD;AAAA,+BACE,QAAC,IAAD,CAAM,IAAN;AAAA,kCACE,QAAC,IAAD,CAAM,KAAN;AAAA,mCACE;AAAA,wBAAKA,IAAI,CAACC;AAAV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE,QAAC,IAAD,CAAM,IAAN;AAAA,sBAAYD,IAAI,CAACE;AAAjB;AAAA;AAAA;AAAA;AAAA,kBAJF,eAME,QAAC,MAAD;AACE,YAAA,OAAO,EAAE,MAAM;AACbJ,cAAAA,UAAU,CAACE,IAAI,CAACH,EAAN,CAAV;AACD,aAHH;AAIE,YAAA,SAAS,EAAC,gBAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF;AAmBD,KApBA;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAyBD;;GAzCQV,I;;KAAAA,I;AA2CT,eAAeA,IAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getDocs, collection, deleteDoc, doc, query, where } from \"firebase/firestore\";\r\nimport { Card, Button } from \"react-bootstrap\";\r\nimport { auth, db } from \"../firebase\";\r\n\r\nfunction Home() {\r\n  const [taskLists, setTaskLists] = useState([]);\r\n  const taskCollectionRef = collection(db, \"tasks\");\r\n\r\n  useEffect(() => {\r\n    const getTasks = async () => {\r\n      const data = query(taskCollectionRef, where (\"workers\" , \"array-contains\", localStorage.getItem(\"id\")))\r\n      setTaskLists(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n    getTasks();\r\n  }, []);\r\n\r\n  const deleteTask = async (id) => {\r\n    const taskDoc = doc(db, \"tasks\", id);\r\n    await deleteDoc(taskDoc);\r\n  };\r\n  return (\r\n    <div>\r\n      {taskLists.map((task) => {\r\n        return (\r\n          <Card>\r\n            <Card.Body>\r\n              <Card.Title>\r\n                <h1>{task.title}</h1>\r\n              </Card.Title>\r\n              <Card.Text>{task.text}</Card.Text>\r\n\r\n              <Button\r\n                onClick={() => {\r\n                  deleteTask(task.id);\r\n                }}\r\n                className=\"btn btn-danger\"\r\n              >\r\n                Excluir\r\n              </Button>\r\n            </Card.Body>\r\n          </Card>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}